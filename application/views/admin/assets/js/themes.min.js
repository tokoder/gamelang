(function($,window,document,undefined){"use strict";cg.themes=cg.themes||{};var themesURL=cg.config.currentURL,themeModalContainer="#theme-details",themeModal="#theme-modal";cg.themes.proceed=function(el,action){var $this=$(el),href=$this.attr("href"),parent=$this.closest(".theme-item"),name=parent.data("name")||"this",action=action||-1;if(typeof href==="undefined"||!href.length){return false;}
parent.siblings().addClass("op-2");var message=cg.i18n.themes[action]||undefined;if(typeof message==="undefined"){message=cg.i18n.default[action]||undefined;if(typeof message==="undefined"){message="Are you sure you to "+action+" %s?";}}
cg.ui.confirm(message.replace(/%s/g,name),function(){window.location.href=href;},function(){parent.siblings().removeClass("op-2");});};cg.themes.details=function(el){var $this=$(el),href=$this.attr("href");if(typeof href==="undefined"||!href.length){return false;}
$(themeModalContainer).load(href+" "+themeModalContainer+" > *",function(){window.history.pushState({href:href},"",href);$(themeModal).modal("show");});};$(document).ready(function(){if(themesURL.indexOf("?")>0){themesURL=themesURL.substring(0,themesURL.indexOf("?"));}
$(document).on("hidden.bs.modal",themeModal,function(e){window.history.pushState({href:themesURL},"",themesURL);$(this).remove();});$(document).on("click",".theme-details",function(e){e.preventDefault();return cg.themes.details(this);});$(document).on("click",".theme-activate",function(e){e.preventDefault();return cg.themes.proceed(this,"activate");});$(document).on("click",".theme-delete",function(e){e.preventDefault();return cg.themes.proceed(this,"delete");});});})(window.jQuery||window.Zepto,window,document);
